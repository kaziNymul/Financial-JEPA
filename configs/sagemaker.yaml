seed: 42

logging:
  tb_dir: "logs/tb"

data:
  processed_glob: "data/processed/data_amex_shards/*.csv"
  entity_col: "artifacts/features.json"
  time_col: "timestamp"
  features: ["*"]  # Use ALL 186 features
  window: 6
  horizon: 1
  train_ratio: 0.9
  shuffle_entities: true

model:
  encoder: "gru"
  d_model: 192       # Will be tuned 128-320
  n_layers: 1        # Will be tuned 1-3
  dropout: 0.1       # Will be tuned 0.05-0.20
  predictor_hidden: 256
  predictor_layers: 2
  ema_decay: 0.997   # Will be tuned 0.995-0.999

  masking:
    time_mask_prob: 0.15       # Will be tuned 0.10-0.25
    time_mask_span: 2
    feature_mask_prob: 0.10    # Will be tuned 0.05-0.15
    feature_mask_span: 2
    num_time_blocks: 2
    num_feature_blocks: 1

# Data augmentation for robustness
augmentation:
  jitter:
    prob: 0.3
    sigma: 0.03
  scaling:
    prob: 0.3
    sigma: 0.1

train:
  ckpt_dir: "checkpoints"
  device: "cuda"             # Will be cuda on SageMaker
  batch_size: 64             # Will be tuned 32-128
  max_epochs: 12
  early_stop_patience: 3
  lr: 0.0001                 # Will be tuned 0.00001-0.001
  weight_decay: 0.00001      # Will be tuned 0.000001-0.0001
  grad_clip: 1.0             # Will be tuned 0.5-2.0
  log_every_steps: 200
  ckpt_every_steps: 1000
  warmup_steps: 200

loss:
  type: "cosine"

eval:
  out_dir: "outputs"
  umap_neighbors: 15
  umap_min_dist: 0.3
